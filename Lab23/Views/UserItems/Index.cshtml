@model IEnumerable<Lab23.Models.UserItem>
@using Lab23.Models;
@{ 
    List <UserItem> userItems = Model.ToList();
    User u = (User)Session["User"];
}

<table class="table">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.UserID)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.ItemID)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Item.Name)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.User.UserName)
        </th>
        <th></th>
    </tr>
@{ 
    if (userItems.Count > 0)
    {
        foreach (var item in Model)
        {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.UserID)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.ItemID)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Item.Name)
                </td>
                <td>
                    <form action="~/UserItems/Details">
                        <input name="id" value="@item.UserItemID" class="hidden" />
                        <input type="submit" value="Details" />
                    </form>
                </td>
                <td>
                    <form action="~/UserItems/Delete">
                        <input name="id" value="@item.UserItemID" class="hidden" />
                        <input name="userId" value="@u.id" class="hidden" />
                        <input type="submit" value="Refund Item" />
                    </form>
                </td>
            </tr>
         }
    }
}

</table>
